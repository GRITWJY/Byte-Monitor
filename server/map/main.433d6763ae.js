(self.webpackChunkwjy_vue_tpl=self.webpackChunkwjy_vue_tpl||[]).push([[179],{2493:function(e,t,n){"use strict";var o=n(7122),r=n(365),a=n.n(r),s=n(3053);s.SourceMapConsumer.initialize({"lib/mappings.wasm":"https://unpkg.com/source-map@0.7.3/lib/mappings.wasm"});var i={name:"App",mounted(){let e=document.getElementById("handleResolve"),t=this;e.addEventListener("change",(function(){let n=e.files[0];const o=new FileReader;o.readAsText(n,"UTF-8"),o.onload=async e=>{const n=await t.lookSource(e.target.result,1,171);console.log(n)}}))},methods:{async lookSource(e,t,n){try{const o=await new s.SourceMapConsumer(e),r=o.originalPositionFor({line:t,column:n});if(!r.source)return;const a=o.sources.indexOf(r.source),i=o.sourcesContent[a].split(/\r?\n/g);let c=[];for(let e=r.line-10;e<r.line+10;e++)e>=0&&c.push(i[e]);return console.log(c),{sourcemapData:r,code:c.join("\n")}}catch(e){return console.log(e),null}},handleVueError(){({}).toFixed(3)},handleJSError(){setTimeout((()=>{this.father()}),1e3)},handlePromiseError(){new Promise(((e,t)=>{this.father(),e()}))},handleResourceError(){let e=document.createElement("script");e.src="xx.js",document.body.appendChild(e)},handleAjaxSuccess(){a().post("https://junesunray.com/llain/reply/get",{a:3}).then((()=>{}))},handleAjaxFail(){a().post("https://junesunray.com/llain/reply/et",{}).then((()=>{}))},handleFetch(){fetch("http://localhost:3000/movies.json").then((e=>e.json())).then((e=>console.log(e)))}}},c=(0,n(6358).Z)(i,(function(){var e=this,t=e._self._c;return t("div",[t("button",{on:{click:e.handleVueError}},[e._v("vue错误")]),e._v(" "),t("button",{on:{click:e.handleJSError}},[e._v("JS错误")]),e._v(" "),t("button",{on:{click:e.handlePromiseError}},[e._v("Promise错误")]),e._v(" "),t("button",{on:{click:e.handleResourceError}},[e._v("资源错误")]),e._v(" "),t("input",{attrs:{type:"file",id:"handleResolve"}}),e._v(" "),t("br"),e._v(" "),t("hr"),e._v(" "),t("button",{on:{click:e.handleAjaxSuccess}},[e._v("测试 ajax 请求-成功(axios)")]),e._v(" "),t("button",{on:{click:e.handleAjaxFail}},[e._v("测试 ajax 请求-失败(axios)")]),e._v(" "),t("button",{on:{click:e.handleFetch}},[e._v("测试 fetch 请求")]),e._v(" "),t("div",[t("h1",{staticClass:"title"},[e._v("hello app")]),e._v(" "),t("button",{attrs:{type:"primary"}},[e._v("按钮")]),e._v(" "),t("ul",[t("li",[t("router-link",{attrs:{to:"/home"}},[e._v("Home")])],1),e._v(" "),t("li",[t("router-link",{attrs:{to:"/about"}},[e._v("About")])],1)]),e._v(" "),t("router-view")],1)])}),[],!1,null,null,null).exports;let u;function l(){return u}function d(e){return e.reverse().filter((e=>e!==document&&e!==window)).map((e=>{let t="";return e.id?`${e.nodeName.toLowerCase()}#${e.id}`:e.className&&"string"==typeof e.className?`${e.nodeName.toLowerCase()}.${e.className}`:(t=e.nodeName.toLowerCase(),t)})).join(">")}function p(e){if(Array.isArray(e))return d(e);{let t=[];for(;e;)t.push(e),e=e.parentNode;return d(t)}}["click"].forEach((e=>{document.addEventListener(e,(e=>{u=e}),{capture:!0,passive:!0})}));let m=n(2664),f=n(5906);const h={appId:"",page:"",timeStamp:Date.now(),userAgent:m.parse(navigator.userAgent),screen:`${window.screen.width*window.devicePixelRatio} * ${window.screen.height*window.devicePixelRatio}`,vue:{Vue:null,router:null}};var v=h;function g(e){for(const t in h)e[t]&&(h[t]=e[t])}function w(){let e={...h};return delete e.vue,e}var y=new class{constructor(){let e=localStorage.getItem("userId");e||(e=function(e,t=32){return f.createHash("sha256").update(String(e)).digest("base64").substr(0,t)}(JSON.stringify(w()),32),localStorage.setItem("userId",e)),g({userId:e})}send(e={}){let t=w();delete t.vue,t.page=window.location.href;let n={...t,...e};console.log(n)}},T=n(3768),b=n.n(T);function _(){var e;window.addEventListener("error",(function(e){let t=l();if(e.target&&(e.target.src||e.target.href))y.send({type:"SourceError",msg:"资源加载失败",stack:[],extra:{filename:e.target.src||e.target.href,tagName:e.target.tagName},selector:p(e.target)});else{const n=b().parse(e.error);y.send({type:e.error.name,message:e.error.message,stack:n,selector:t?p(t.path):""})}}),!0),window.addEventListener("unhandledrejection",(function(e){let t=l();if(console.log(e),!e.reason.stack)return;const n=b().parse(e.reason);y.send({type:e.reason.name,message:e.reason.message,stack:n,selector:t?p(t.path):""})}),!0),v.vue?.Vue&&((e=v.vue.Vue).config.productionTip=!1,e.config.errorHandler=(e,t,n)=>{let o=l();const r=b().parse(e);let a={type:e.name,stack:r,msg:e.message,selector:p(o.path)||"",extra:{componentName:E(t),lifecycleHook:n}};y.send(a)})}function E(e){if(e.$root===e)return"root instance";var t=e._isVue?e.$options.name||e.$options._componentTag:e.name;return(t?"component <"+t+">":"anonymous component")+(e._isVue&&e.$options.__file?" at "+e.$options.__file:"")}function k(){!function(){let e=window.XMLHttpRequest.prototype,t=XMLHttpRequest.prototype.send,n=e.open;e.open=function(...e){return this.logData={url:e[1],method:e[0]},n.apply(this,e)},e.send=function(e){if(this.logData){let t=Date.now(),n=()=>{let o=Date.now(),r=this.status;y.send({startTime:t,endTime:o,status:r,type:"xhr",duration:o-t,url:this.logData.url,method:(this.logData.method||"GET").toUpperCase(),success:r>=200&&r<300,params:e,response:this.response}),this.removeEventListener("loadend",n,!0)};this.addEventListener("loadend",n,!0)}return t.apply(this,arguments)}}(),window.fetch=function(e,t){const n={startTime:Date.now(),url:e,method:(t?.method||"GET").toUpperCase(),type:"fetch"};return S(e,t).then((e=>{n.endTime=Date.now(),n.duration=n.endTime-n.startTime;const t=e.clone();return n.status=t.status,n.success=t.ok,y.send(n),e})).catch((e=>{throw n.endTime=Date.now(),n.duration=n.endTime-n.startTime,n.status=0,n.success=!1,y.send(n),e}))}}const S=window.fetch;function L(){!function(){const e=new PerformanceObserver((t=>{j=!0,e&&e.disconnect();for(const e of t.getEntries())x=e.startTime}));e.observe({type:"largest-contentful-paint",buffered:!0})}(),function(){const e=new PerformanceObserver((t=>{D=!0;for(const n of t.getEntries())"first-paint"===n.name&&(C=n.startTime,e.disconnect()),"first-contentful-paint"===n.name&&(P=n.startTime,e.disconnect())}));e.observe({type:"paint",buffered:!0})}(),function(e){function t(e){$=!0;const t=e.getEntries?e.getEntries():e;for(const e of t)H={resourceName:e.name,sourceType:e.initiatorType,duration:e.duration,dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,redirect:e.redirectEnd-e.redirectStart,ttfb:e.responseStart,protocol:e.nextHopProtocol,responseBodySize:e.encodedBodySize,responseHeaderSize:e.transferSize-e.encodedBodySize,resourceSize:e.decodedBodySize,isCache:z(e),startTime:performance.now()}}new PerformanceObserver(t).observe({type:e,buffered:!0})}("resource"),["load","DOMContentLoaded"].forEach((e=>function(e){const t=()=>{"load"===e&&(M=!0,N=performance.now()),"DOMContentLoaded"===e&&(R=performance.now()),window.removeEventListener(e,t,!0)};window.addEventListener(e,t,!0)}(e))),F(),v.vue?.Vue&&v.vue?.router&&(console.log("a"),function(e,t){let n,o,r=!0;t.beforeEach(((e,o,a)=>{if(r)return r=!1,a();t.needCalculateRenderTime=!0,n=performance.now(),a()})),e.mixin({mounted(){t.needCalculateRenderTime&&this.$nextTick((()=>{const e=performance.now();clearTimeout(o),o=setTimeout((()=>{t.needCalculateRenderTime=!1,y.send({type:"router-time",duration:e-n,startTime:e})}),1e3)}))}})}(v.vue.Vue,v.vue.router))}let x,C,P,j=!1;let H,D=!1;let N,R,$=!1;function z(e){return 0===e.transferSize||0!==e.transferSize&&0===e.encodedBodySize}let A,M=!1;function F(){clearTimeout(A),A=setTimeout((()=>{if(j&&D&&$&&M){let e={FP:C,FCP:P,LCP:x,load:N,DOMContentLoaded:R,...H,category:"performace"};y.send(e)}else F()}),500)}function O(){v.vue?.router&&function(e){e.beforeEach(((e,t,n)=>{const o={params:e.params,query:e.query};y.send({data:o,name:e.name||e.path,startTime:performance.now(),from:t.fullPath,to:e.fullPath,type:"vue-change"}),n()}))}(v.vue.router),["mousedown","touchstart"].forEach((e=>{let t;window.addEventListener(e,(n=>{clearTimeout(t),t=setTimeout((()=>{const t=n.target,{top:o,left:r}=t.getBoundingClientRect();y.send({top:o,left:r,eventType:e,pageHeight:document.documentElement.scrollHeight||document.body.scrollHeight,scrollTop:document.documentElement.scrollTop||document.body.scrollTop,type:"behavior",subType:"click",target:t.tagName,paths:n.path?.map((e=>e.tagName)).filter(Boolean),outerHTML:t.outerHTML,innerHTML:t.innerHTML,width:t.offsetWidth,height:t.offsetHeight,viewport:{width:window.innerWidth,height:window.innerHeight}})}),500)}))}))}var V={init:function(e={}){g(e),_(),k(),L(),O()}},B=n(6451);o.ZP.use(B.Z);var I=new B.Z({routes:[{path:"/home",component:()=>n.e(237).then(n.bind(n,9237))},{path:"/about",name:"about",component:()=>n.e(943).then(n.bind(n,4943)),children:[{path:"a",component:()=>n.e(194).then(n.bind(n,4194))}]}]});V.init({version:"4949404",appId:"4944404fjnnnfksafksfa",vue:{Vue:o.ZP,router:I}}),new o.ZP({router:I,render:e=>e(c)}).$mount("#app")},1786:function(e){"use strict";e.exports=void 0},1314:function(){},9391:function(){},1388:function(){},8941:function(){},4504:function(){}},function(e){e.O(0,[277,558],(function(){return t=2493,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=main.433d6763ae.js.map